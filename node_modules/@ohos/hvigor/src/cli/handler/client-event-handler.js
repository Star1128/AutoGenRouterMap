"use strict";var __importDefault=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.handleServerMsgError=exports.handleWatchLog=exports.handleWatchBuildResult=exports.handleBuildStatus=exports.printLog=void 0;const process_1=__importDefault(require("process")),util_1=__importDefault(require("util")),common_enum_js_1=require("../../base/common/daemon-protocol/common-enum.js"),hvigor_log_js_1=require("../../base/log/hvigor-log.js"),log=hvigor_log_js_1.HvigorLogger.getLogger("client-event-handler");function printLog(e){e&&e.type&&e.text?(e.type===common_enum_js_1.OutputType.STDOUT&&process_1.default.stdout.write(e.text,e.encoding),e.type===common_enum_js_1.OutputType.STDERR&&process_1.default.stderr.write(e.text,e.encoding)):handleServerMsgError(log,e)}function handleBuildStatus(e){function t(t){var r;log.debug(t),process_1.default.exitCode=null!==(r=e.exitCode)&&void 0!==r?r:-1,process_1.default.exit()}e&&e.status?(e.reason&&log.error(e.reason),e.status===common_enum_js_1.BuildStatus.FINISH&&t("The build request was finished"),e.status===common_enum_js_1.BuildStatus.REJECT&&t("The build request was rejected."),e.status===common_enum_js_1.BuildStatus.CLOSE&&t("The build request was closed.")):handleServerMsgError(log,e)}function handleWatchBuildResult(e){log.debug(e)}function handleWatchLog(e){log.info(e)}function handleServerMsgError(e,t){e.warn("Received server exception type information."),e.warn(`receive server message:${util_1.default.format(t)}`)}exports.printLog=printLog,exports.handleBuildStatus=handleBuildStatus,exports.handleWatchBuildResult=handleWatchBuildResult,exports.handleWatchLog=handleWatchLog,exports.handleServerMsgError=handleServerMsgError;