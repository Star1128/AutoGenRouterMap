"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.DefaultDaemonRegistry=void 0;const daemon_const_js_1=require("../const/daemon-const.js"),daemon_cache_service_js_1=require("./daemon-cache-service.js"),daemon_info_js_1=require("./daemon-info.js");class DefaultDaemonRegistry{constructor(e){this._log=e,this.daemonCacheService=new daemon_cache_service_js_1.DaemonCacheService(daemon_const_js_1.DEFAULT_DAEMON_REGISTRY_PATH,e)}getIdles(){return this.getInfos().filter((e=>e.state===daemon_info_js_1.DaemonState.IDLE))}getAlive(){return this.getInfos().filter((e=>e.state!==daemon_info_js_1.DaemonState.STOPPED&&e.state!==daemon_info_js_1.DaemonState.BROKEN&&e.state!==daemon_info_js_1.DaemonState.BUSY))}getInfo(e){return{...this.daemonCacheService.get(e),keyId:e}}getInfos(){return Object.entries(this.daemonCacheService.getAll()).map((([e,t])=>({...t,keyId:e})))}getDaemonInfoByPid(e){return this.getInfos().filter((t=>t.pid===e)).pop()}setInfo(e,t){this.daemonCacheService.set(e,t)}}exports.DefaultDaemonRegistry=DefaultDaemonRegistry;