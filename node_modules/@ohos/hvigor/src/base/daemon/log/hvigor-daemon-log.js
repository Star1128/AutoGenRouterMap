"use strict";var __importDefault=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.configureDaemon=exports.HvigorDaemonLogger=void 0;const log4js_1=__importDefault(require("log4js")),path_1=__importDefault(require("path")),hvigor_log_js_1=require("../../log/hvigor-log.js"),log_event_js_1=require("../../metrics/event/log-event.js"),daemon_const_js_1=require("../const/daemon-const.js"),daemonConfiguration={appenders:{"daemon-file":{type:"fileSync",filename:path_1.default.resolve(daemon_const_js_1.DAEMON_LOG_PATH,`daemon-${process.pid}.log`),maxLogSize:10485760,backups:2,encoding:"utf-8"}},categories:{daemon:{appenders:["daemon-file"],level:"debug"}}};class HvigorDaemonLogger extends hvigor_log_js_1.HvigorLogger{constructor(e){super("default"),this._daemonFileLogger=log4js_1.default.getLogger(e)}static getLogger(e){return new HvigorDaemonLogger(e)}log(e,...o){this.createLogEventByDurationId(e,log_event_js_1.MetricLogType.INFO,...o),this._daemonFileLogger.log(e,...o)}debug(e,...o){this.createLogEventByDurationId(e,log_event_js_1.MetricLogType.DEBUG,...o),this._daemonFileLogger.debug(e,...o)}info(e,...o){this.createLogEventByDurationId(e,log_event_js_1.MetricLogType.INFO,...o),this._daemonFileLogger.info(e,...o)}warn(e,...o){void 0!==e&&""!==e&&(this.createLogEventByDurationId(e,log_event_js_1.MetricLogType.WARN,...o),this._daemonFileLogger.warn(e,...o))}error(e,...o){this.createLogEventByDurationId(e,log_event_js_1.MetricLogType.ERROR,...o),this._daemonFileLogger.error(e,...o)}}function configureDaemon(){(0,hvigor_log_js_1.configure)(daemonConfiguration)}exports.HvigorDaemonLogger=HvigorDaemonLogger,exports.configureDaemon=configureDaemon;