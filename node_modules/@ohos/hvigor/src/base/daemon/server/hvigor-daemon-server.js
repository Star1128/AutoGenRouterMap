"use strict";var __createBinding=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),__setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),__importStar=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&__createBinding(t,e,r);return __setModuleDefault(t,e),t},__importDefault=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.HvigorDaemonServer=exports.DaemonServerEventName=void 0;const events_1=__importDefault(require("events")),http=__importStar(require("http")),socket_io_1=require("socket.io");var DaemonServerEventName;!function(e){e.CONNECTION="connection",e.LISTENING="listening",e.LISTEN_FAILED="listenFailed",e.CLOSE_CONNECTION="closeConnection",e.CLOSE_SERVER="closeServer",e.ERROR="error"}(DaemonServerEventName=exports.DaemonServerEventName||(exports.DaemonServerEventName={}));class HvigorDaemonServer extends events_1.default{constructor(e){super(),this.httpServer=http.createServer(),this.server=new socket_io_1.Server(this.httpServer,{path:`/${e}`,pingInterval:6e4,pingTimeout:6e4}),this.sessionId=e}static getInstance(e){return HvigorDaemonServer.instance||(HvigorDaemonServer.instance=new HvigorDaemonServer(e)),HvigorDaemonServer.instance}getHttpServer(){return this.httpServer}getSessionId(){return this.sessionId}onConnection(e){this.server.on(DaemonServerEventName.CONNECTION,e)}onError(e){this.server.on(DaemonServerEventName.ERROR,e)}listen(e,t,r){this.httpServer.listen(e,t,r)}onListening(e){this.httpServer.on(DaemonServerEventName.LISTENING,e)}onListenFailed(e){this.on(DaemonServerEventName.LISTEN_FAILED,e)}onCloseConnection(e){this.on(DaemonServerEventName.CLOSE_CONNECTION,e)}onCloseServer(e){this.on(DaemonServerEventName.CLOSE_SERVER,e)}}exports.HvigorDaemonServer=HvigorDaemonServer;