"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.processLegacyConfig=void 0;const global_core_parameters_js_1=require("../../internal/data/global-core-parameters.js"),global_data_js_1=require("../../internal/data/global-data.js"),hvigor_log_js_1=require("../../log/hvigor-log.js"),hvigor_config_reader_js_1=require("../../util/hvigor-config-reader.js"),_log=hvigor_log_js_1.HvigorLogger.getLogger("process-build-analyze-mode");function processLegacyConfig(e){processAnalyzeMode(e),processLegacyCliAnalyzeMode(e),processLegacyConfigAnalyzeMode()}function processAnalyzeMode(e){const a="--analyze=";if(!e)return;const o=e._.filter((e=>e.startsWith(a)));o&&o.length&&(e.analyze=o[o.length-1].substring(10),e._=e._.filter((e=>!e.startsWith(a))))}function processLegacyConfigAnalyzeMode(){var e,a;const o=hvigor_config_reader_js_1.HvigorConfigReader.getHvigorConfig();if(void 0!==(null===(e=null==o?void 0:o.execution)||void 0===e?void 0:e.analyze)){const e=global_core_parameters_js_1.OldAnalyzeModeMap.get(o.execution.analyze);e&&_log.warn(`Build analysis mode '${o.execution.analyze}' is deprecated, please use '${e}' instead.`),global_core_parameters_js_1.coreParameter.startParams.analyze=null!==(a=global_core_parameters_js_1.AnalyzeModeMap.get(o.execution.analyze))&&void 0!==a?a:global_core_parameters_js_1.coreParameter.startParams.analyze}}function processLegacyCliAnalyzeMode(e){const a=null!=e?e:global_data_js_1.globalData.cliOpts;a.verboseAnalyze&&(global_core_parameters_js_1.coreParameter.startParams.analyze=global_core_parameters_js_1.AnalyzeMode.ADVANCED,_log.warn("Command line '--verbose-analyze' is deprecated, please use '--analyze=advanced' instead.")),void 0!==a.analyze&&("boolean"==typeof a.analyze?useOldAnalyzeMode(a.analyze):useNewAnalyzeMode(a.analyze))}function useOldAnalyzeMode(e){e?(global_core_parameters_js_1.coreParameter.startParams.analyze=global_core_parameters_js_1.AnalyzeMode.NORMAL,_log.warn("Command line '--analyze' is deprecated, please use '--analyze=normal' instead.")):(global_core_parameters_js_1.coreParameter.startParams.analyze=global_core_parameters_js_1.AnalyzeMode.FALSE,_log.warn("Command line '--no-analyze' is deprecated, please use '--analyze=false' instead."))}function useNewAnalyzeMode(e){const a=global_core_parameters_js_1.AnalyzeModeMap.get(e);void 0===a?_log.warn(`Build analysis mode: ${e} is not available, value should be one of: 'normal', 'advanced' and 'false'.`):global_core_parameters_js_1.coreParameter.startParams.analyze=a}exports.processLegacyConfig=processLegacyConfig;