"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.HvigorNodeImpl=void 0;const hvigor_file_util_1=require("../../../../common/util/hvigor-file-util"),hvigor_core_js_1=require("../../../external/core/hvigor-core.js"),hvigor_log_js_1=require("../../../log/hvigor-log.js"),task_impl_js_1=require("../../task/impl/task-impl.js");class HvigorNodeImpl{constructor(e){this.logger=hvigor_log_js_1.HvigorLogger.getLogger(HvigorNodeImpl.name),this.allSubNodes=[],this.node=e,this.nodeDir=new hvigor_file_util_1.NormalizedFile(e.getNodeDir()),Object.freeze(this.nodeDir)}getNodeName(){return this.node.getName()}getNodePath(){return this.node.getNodeDir()}getParentNode(){return this.loadParentNode(),this.parentNode}getContext(e){return this.node.getContext(e)}getAllPluginIds(){return this.node.getAllPluginIds()}getSubNodeByName(e){return this.loadAllSubNodes(),this.allSubNodes.find((t=>t.getNodeName()===e))}getTaskByName(e){const t=this.node.getTaskByName(e);if(t)return t.getHvigorTask();this.logger.warn(`The task '${e}' cannot be found on the current node.`)}registerTask(e){return this.node.registerTask(e)}subNodes(e){this.loadAllSubNodes(),this.allSubNodes.forEach((t=>e(t)))}getNodeDir(){return this.nodeDir}getConfigOpt(){return this.node.getConfigOpt()}loadParentNode(){this.parentNode=hvigor_core_js_1.hvigorCore.getParentNodeByScriptPath(this.node.getBuildFilePath())}loadAllSubNodes(){var e;this.allSubNodes=null!==(e=hvigor_core_js_1.hvigorCore.getSubNodeByScriptPath(this.node.getBuildFilePath()))&&void 0!==e?e:[]}addExtraOption(e,t){this.node.addExtraOption(e,t)}getExtraOption(e){return this.node.getExtraOption(e)}beforeNodeEvaluate(e){this.node.beforeNodeEvaluate(e)}afterNodeEvaluate(e){this.node.afterNodeEvaluate(e)}getAllTasks(){return this.node.getAllTasks().map((e=>new task_impl_js_1.TaskImpl(e)))}}exports.HvigorNodeImpl=HvigorNodeImpl;