"use strict";var __importDefault=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.getLastHvigorVersion=exports.updateMetaProperties=exports.getMetaProperty=void 0;const fs_1=__importDefault(require("fs")),fs_extra_1=__importDefault(require("fs-extra")),path_1=__importDefault(require("path")),path_util_js_1=require("../../common/util/path-util.js"),hvigor_log_js_1=require("../log/hvigor-log.js"),json_reader_js_1=require("./json-reader.js"),logger=hvigor_log_js_1.HvigorLogger.getLogger("meta-util"),hvigorVersion="hvigorVersion";function getMetaCacheFilePath(){return path_1.default.resolve(path_util_js_1.PathUtil.getHvigorCacheDir(logger),"./cache/meta.json")}function getMetaProperty(e){const t=getMetaCacheFilePath();return fs_1.default.existsSync(t)?json_reader_js_1.JsonReader.getJsonObj(t)[e]:void 0}function updateMetaProperties(e){if(!e.size)return;const t=getMetaCacheFilePath(),r=fs_1.default.existsSync(t)?json_reader_js_1.JsonReader.getJsonObj(t):{};e.forEach(((e,t)=>r[t]=e)),fs_extra_1.default.ensureFileSync(t),fs_extra_1.default.writeJSONSync(t,r)}function getLastHvigorVersion(){return getMetaProperty(hvigorVersion)}exports.getMetaProperty=getMetaProperty,exports.updateMetaProperties=updateMetaProperties,exports.getLastHvigorVersion=getLastHvigorVersion;