"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.outputPluginSyncInfo=exports.findSyncTaskPathsForNode=void 0;const path_1=require("path"),local_file_writer_js_1=require("../../../common/util/local-file-writer.js"),path_util_js_1=require("../../../common/util/path-util.js"),default_tooling_model_bean_registry_js_1=require("../../external/default-tooling-model-bean-registry.js"),hvigor_log_js_1=require("../../log/hvigor-log.js"),default_sync_task_js_1=require("../task/core/default-sync-task.js"),_log=hvigor_log_js_1.HvigorLogger.getLogger("hvigor-process");function findSyncTaskPathsForNode(e){return e.getAllTasks().filter((e=>e instanceof default_sync_task_js_1.DefaultSyncTask)).map((e=>e.getPath()))}function outputPluginSyncInfo(){const e=Object.create(null);default_tooling_model_bean_registry_js_1.defaultModelRegistry.getModelMap().forEach(((t,o)=>e[o]=t.buildModel())),e.version=1;const t=(0,path_1.resolve)(path_util_js_1.PathUtil.getHvigorCacheDir(_log),"outputs","sync","output.json");try{local_file_writer_js_1.LocalFileWriter.getInstance().write(t,e)}catch(e){_log.error("Sync info serialization failed.")}}exports.findSyncTaskPathsForNode=findSyncTaskPathsForNode,exports.outputPluginSyncInfo=outputPluginSyncInfo;