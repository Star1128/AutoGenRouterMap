"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.TaskService=void 0;const dependency_interface_js_1=require("../../project/dependency/core/dependency-interface.js");class TaskService{constructor(e,n,t,p){this.hvigorNode=e,this._projectModel=n,this._dependencyManager=t,this._isFaMode=p}initDependencyInfo(){this._moduleDependencyInfo=this._dependencyManager.createModelDependencyInfo()}isFaMode(){return this._isFaMode}getNode(){return this.hvigorNode}getProjectModel(){return this._projectModel}getDependencyMainPaths(){return this.getDependencyInfo().getNpmDependencies().map((e=>e.getDependencyMainFilePath()))}getDependencyRootPaths(){return this.getDependencyInfo().getNpmDependencies().map((e=>e.getDependencyRootPath()))}getDependencyName2RootPath(){const e=new Map;for(const n of this.getDependencyInfo().getNpmDependencies()){const t=n.getDependencyName();if(e.has(t))return!1;e.set(t,n.getDependencyRootPath())}return e}getHarDependencies(){return this.getDependencyInfo().getNpmDependencies().filter((e=>e.getDependencyType()===dependency_interface_js_1.DependencyType.DEPENDENCY_TYPE_HAR))}getHspDependencies(){return this.getDependencyInfo().getNpmDependencies().filter((e=>e.getDependencyType()===dependency_interface_js_1.DependencyType.DEPENDENCY_TYPE_HSP))}getSODependencies(){return this.getDependencyInfo().getAllDependencies().filter((e=>e.getDependencyType()===dependency_interface_js_1.DependencyType.DEPENDENCY_TYPE_SO))}getOtherDependencies(){return this.getDependencyInfo().getAllDependencies().filter((e=>e.getDependencyType()===dependency_interface_js_1.DependencyType.DEPENDENCY_TYPE_OTHER))}getAllDependencies(){return this.getDependencyInfo().getAllDependencies()}getHspDependencyPaths(){return this.getHspDependencies().filter((e=>e.getDependencyEnum()!==dependency_interface_js_1.DependencyEnum.DYNAMIC_DEPENDENCIES)).map((e=>e.getDependencyRootPath()))}getModuleDependencies(){return[...this.getDependencyInfo().getModuleDependencyMap().values()]}getModuleDependenciesPaths(){return this.getModuleDependencies().map((e=>e.getDependencyRootPath()))}getHarModuleDependencies(){return[...this.getDependencyInfo().getModuleDependencyMap().entries()].filter((([,e])=>e.getDependencyType()===dependency_interface_js_1.DependencyType.DEPENDENCY_TYPE_HAR))}getHarModuleDependencyNames(){return this.getHarModuleDependencies().map((([e])=>e))}getHarModuleDependencyPaths(){return this.getHarModuleDependencies().map((([,e])=>e.getDependencyRootPath()))}getHspModuleDependencies(){return[...this.getDependencyInfo().getModuleDependencyMap().entries()].filter((([,e])=>e.getDependencyType()===dependency_interface_js_1.DependencyType.DEPENDENCY_TYPE_HSP))}getHspModuleDependencyNames(){return this.getHspModuleDependencies().map((([e])=>e))}getHspModuleDependencyPaths(){return this.getHspModuleDependencies().map((([,e])=>e.getDependencyRootPath()))}getHspModuleDependencyPathsWithOutDynamic(){return this.getHspModuleDependencies().filter((([,e])=>e.getDependencyEnum()!==dependency_interface_js_1.DependencyEnum.DYNAMIC_DEPENDENCIES)).map((([,e])=>e.getDependencyRootPath()))}hasHspDependencies(){return this.getDependencyInfo().hasHspDependency()}getDependencyInfo(){var e;return null!==(e=this._moduleDependencyInfo)&&void 0!==e?e:this._dependencyManager.createModelDependencyInfo()}getOhpmDependencyInfo(){const e={};return this.getDependencyInfo().getNpmDependencies().forEach((n=>{e[n.getDependencyName()]={name:n.getPackageName(),version:n.getDependencyVersion(),dependencies:n.getDependencies(),packagePath:n.getDependencyRootPath()}})),e}}exports.TaskService=TaskService;