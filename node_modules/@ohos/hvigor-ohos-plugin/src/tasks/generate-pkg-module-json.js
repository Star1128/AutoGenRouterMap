"use strict";var __importDefault=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.GeneratePkgModuleJson=void 0;const task_names_1=require("./common/task-names"),ohos_hap_task_1=require("./task/ohos-hap-task");var Task=task_names_1.TaskNames.Task;const hvigor_1=require("@ohos/hvigor"),fs_extra_1=__importDefault(require("fs-extra")),path_1=__importDefault(require("path")),common_const_1=require("../const/common-const");class GeneratePkgModuleJson extends ohos_hap_task_1.OhosHapTask{constructor(t){super(t,Task.GENERATE_PKG_MODULE_JSON);const e=this.targetService.getTargetData().getPathInfo();this.jsonPath=path_1.default.resolve(e.getIntermediatesRes(),common_const_1.CommonConst.MODULE_JSON),this.packageHapJsonPath=path_1.default.resolve(this.pathInfo.getPackageHapProductPath(),common_const_1.CommonConst.MODULE_JSON)}async beforeAlwaysAction(){const t=this.pathInfo.getPackageHapProductPath();fs_extra_1.default.existsSync(t)||fs_extra_1.default.ensureDirSync(t),fs_extra_1.default.existsSync(this.jsonPath)&&fs_extra_1.default.copyFileSync(this.jsonPath,this.packageHapJsonPath)}async doTaskAction(){}initTaskDepends(){}declareInputFiles(){const t=new hvigor_1.FileSet;return fs_extra_1.default.existsSync(this.jsonPath)&&t.addEntry(this.jsonPath),t}declareOutputFiles(){const t=new hvigor_1.FileSet;return fs_extra_1.default.existsSync(this.packageHapJsonPath)&&t.addEntry(this.packageHapJsonPath),t}}exports.GeneratePkgModuleJson=GeneratePkgModuleJson;