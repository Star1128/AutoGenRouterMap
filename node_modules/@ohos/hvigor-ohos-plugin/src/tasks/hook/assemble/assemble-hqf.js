"use strict";var __importDefault=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.AssembleHqf=void 0;const hvigor_1=require("@ohos/hvigor"),fs_extra_1=__importDefault(require("fs-extra")),path_1=__importDefault(require("path")),module_type_enum_js_1=require("../../../enum/module-type-enum.js"),task_names_js_1=require("../../common/task-names.js"),prepare_quickfix_js_1=require("../../prepare-quickfix.js"),abstract_module_hook_task_js_1=require("../abstract-module-hook-task.js");class AssembleHqf extends abstract_module_hook_task_js_1.AbstractModuleHookTask{constructor(e){super(e,!1,task_names_js_1.TaskNames.CommonHookTask.ASSEMBLE_HQF),this.registryAction=()=>async()=>{if(this._moduleService.getModuleModel().getModuleType()!==module_type_enum_js_1.ModuleType.Entry)return;const e=path_1.default.resolve(hvigor_1.PathUtil.getHvigorCacheDir(),"outputs","patch","patch.json"),t=await prepare_quickfix_js_1.PrepareQuickfix.getCurrentHqfVersion()+1;await fs_extra_1.default.ensureDir(path_1.default.dirname(e)),await fs_extra_1.default.writeJSON(e,{patchVersionCode:t})}}initTaskDepends(e){throw new Error("Method not implemented.")}}exports.AssembleHqf=AssembleHqf;