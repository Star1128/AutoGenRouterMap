"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.AssembleHap=void 0;const hvigor_1=require("@ohos/hvigor"),task_names_js_1=require("../../common/task-names.js"),sign_hap_js_1=require("../../sign-hap.js"),abstract_module_hook_task_js_1=require("../abstract-module-hook-task.js");var CommonHookTask=task_names_js_1.TaskNames.CommonHookTask;const legacy_package_hap_js_1=require("../../legacy-tasks/legacy-package-hap.js"),package_hap_js_1=require("../../package-hap.js");class AssembleHap extends abstract_module_hook_task_js_1.AbstractModuleHookTask{constructor(a,e){super(a,e,CommonHookTask.ASSEMBLE_HAP)}initTaskDepends(a){this.skipSignHap(a)?this.dependsOn(this._isFaMode?`${a.getTargetData().getTargetName()}@${legacy_package_hap_js_1.LegacyPackageHap.name}`:`${a.getTargetData().getTargetName()}@${package_hap_js_1.PackageHap.name}`):this.dependsOn(`${a.getTargetData().getTargetName()}@${sign_hap_js_1.SignHap.name}`)}skipSignHap(a){var e;return(null===(e=a.getBuildOption().packOptions)||void 0===e?void 0:e.buildAppSkipSignHap)&&hvigor_1.hvigorCore.isCommandEntryTask(task_names_js_1.TaskNames.CommonHookTask.ASSEMBLE_APP.name)}}exports.AssembleHap=AssembleHap;