"use strict";var __importDefault=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.LegacyPackageHar=void 0;const abstract_package_har_js_1=require("../../abstract/abstract-package-har.js"),task_names_js_1=require("../../common/task-names.js"),legacy_hook_compile_resource_js_1=require("../hook/legacy-hook-compile-resource.js");var LegacyFATask=task_names_js_1.TaskNames.LegacyFATask;const fs_extra_1=__importDefault(require("fs-extra")),path_1=__importDefault(require("path")),common_const_js_1=require("../../../const/common-const.js"),ohos_logger_js_1=require("../../../utils/log/ohos-logger.js"),cache_native_libs_js_1=require("../../cache-native-libs.js"),_log=ohos_logger_js_1.OhosLogger.getLogger("hvigor-PackageHar");class LegacyPackageHar extends abstract_package_har_js_1.AbstractPackageHar{constructor(e){super(e,LegacyFATask.PACKAGE_HAR)}initTaskDepends(){this.declareDepends(cache_native_libs_js_1.CacheNativeLibs.name),this.declareDepends(legacy_hook_compile_resource_js_1.LegacyHookCompileResource.name),this.declareDepends(common_const_js_1.ArktSTaskConst.LINT_ARKTS)}copyCompiledSourceFileToTempDir(){throw new Error("Har does not support compiled source and package,which api type is FA")}copyOtherGenerateFiles(){if(this._harExtendInfo.isObfuscatedHar())throw new Error("Har does not support package generate files which api type is FA");try{fs_extra_1.default.copySync(path_1.default.resolve(this.generateDir,this.isOhpmProject?common_const_js_1.CommonConst.OH_PACKAGE_JSON5:common_const_js_1.CommonConst.PACKAGE_JSON),path_1.default.resolve(this.taskTmpDir,this.isOhpmProject?common_const_js_1.CommonConst.OH_PACKAGE_JSON5:common_const_js_1.CommonConst.PACKAGE_JSON))}catch(e){_log.warn("Failed to copy the temporary path when packing the HAR: ",e.message)}}addSourceDirsToPackageJson(){}}exports.LegacyPackageHar=LegacyPackageHar;