"use strict";var __importDefault=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.LegacyPreviewerArkCompile=void 0;const hvigor_1=require("@ohos/hvigor"),path_1=__importDefault(require("path")),ohos_logger_js_1=require("../../utils/log/ohos-logger.js"),legacy_compile_node_js_1=require("./legacy-compile-node.js");class LegacyPreviewerArkCompile extends legacy_compile_node_js_1.LegacyCompileNode{constructor(){super(...arguments),this.logger=ohos_logger_js_1.OhosLogger.getLogger(LegacyPreviewerArkCompile.name)}declareInputFiles(){return this.moduleModel.isHarModule()?super.declareInputFiles().deleteEntry(this.aceBuildJsonDir):super.declareInputFiles()}async doTaskAction(){const e=await this.getPreviewCompileConfig(this.logger);e.aceModuleJsonPath=void 0;const r=hvigor_1.watchWorker.createWorker(this,path_1.default.resolve(__dirname,"../worker/preview-build.js"),!0,(e=>this.handleCompileEvents(e,this.getSubDurationEvent(r),!0)),{workerData:{projectConfig:e,logLevel:this.logger.getLevel().levelStr}})}initTaskDepends(){this.dependsOnHook("buildPreviewerResource")}}exports.LegacyPreviewerArkCompile=LegacyPreviewerArkCompile;