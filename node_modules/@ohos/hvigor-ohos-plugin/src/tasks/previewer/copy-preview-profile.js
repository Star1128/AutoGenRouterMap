"use strict";var __importDefault=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.CopyPreviewProfile=void 0;const hvigor_1=require("@ohos/hvigor"),fs_extra_1=__importDefault(require("fs-extra")),path_1=__importDefault(require("path")),build_directory_const_js_1=require("../../const/build-directory-const.js"),task_names_js_1=require("../common/task-names.js"),ohos_hap_task_js_1=require("../task/ohos-hap-task.js"),preview_hook_compile_resource_js_1=require("../hook/preview-hook-compile-resource.js");var CommonTask=task_names_js_1.TaskNames.CommonTask;class CopyPreviewProfile extends ohos_hap_task_js_1.OhosHapTask{constructor(e){super(e,CommonTask.COPY_PREVIEWER_PROFILE),this.profilePath=void 0,this.targetProfilePath=void 0,this.profilePath=path_1.default.resolve(this.targetData.getModuleModel().getSourceRootByTargetName(this.targetData.getModuleModel().getName()),build_directory_const_js_1.BuildDirConst.RESTOOL_BUILD_RESOURCES,build_directory_const_js_1.BuildDirConst.BASE,build_directory_const_js_1.BuildDirConst.PROFILE),this.targetProfilePath=path_1.default.resolve(this.targetData.getPathInfo().getIntermediatesRes(),build_directory_const_js_1.BuildDirConst.RESTOOL_BUILD_RESOURCES,build_directory_const_js_1.BuildDirConst.BASE,build_directory_const_js_1.BuildDirConst.PROFILE)}initTaskDepends(){this.declareDepends(preview_hook_compile_resource_js_1.PreviewHookCompileResource.name)}declareInputFiles(){const e=new hvigor_1.FileSet;return this.profilePath&&fs_extra_1.default.existsSync(this.profilePath)&&e.addEntry(this.profilePath),e}declareOutputFiles(){const e=new hvigor_1.FileSet;return this.targetProfilePath&&e.addEntry(this.targetProfilePath),e}doTaskAction(){void 0!==this.profilePath&&fs_extra_1.default.existsSync(this.profilePath)&&this.targetProfilePath&&(fs_extra_1.default.ensureDirSync(this.targetProfilePath),fs_extra_1.default.copySync(this.profilePath,this.targetProfilePath,{recursive:!0}))}}exports.CopyPreviewProfile=CopyPreviewProfile;