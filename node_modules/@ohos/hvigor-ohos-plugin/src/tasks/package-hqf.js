"use strict";var __importDefault=this&&this.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.PackageHqf=void 0;const path_1=__importDefault(require("path")),process_utils_js_1=require("../utils/process-utils.js"),task_names_js_1=require("./common/task-names.js"),ohos_hap_task_js_1=require("./task/ohos-hap-task.js");class PackageHqf extends ohos_hap_task_js_1.OhosHapTask{constructor(s){super(s,task_names_js_1.TaskNames.Task.PACKAGE_HQF)}async doTaskAction(){const s=path_1.default.resolve(this.pathInfo.getPatchDir(),"resources"),e=path_1.default.resolve(this.pathInfo.getPatchDir(),"libs"),t=path_1.default.resolve(this.pathInfo.getModuleBuildOutputPath(),`${this.moduleName}-${this.targetName}-unsigned.hqf`),a=this.sdkInfo.getPackageTool(),o=path_1.default.resolve(this.pathInfo.getPatchDir(),"patch.json"),h=["java","-jar",a,"--mode","hqf"];h.push("--json-path",o),h.push("--lib-path",e),h.push("--ets-path",path_1.default.resolve(this.pathInfo.getPatchDir(),"ets")),h.push("--resources-path",path_1.default.resolve(s)),h.push("--out-path",t),h.push("--force","true"),await(new process_utils_js_1.ProcessUtils).execute(h,{encoding:"utf-8"})}initTaskDepends(){this.declareDepends(task_names_js_1.TaskNames.Task.PREPARE_QUICKFIX.name)}}exports.PackageHqf=PackageHqf;