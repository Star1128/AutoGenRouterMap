"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.BuildHotReloadResourceCA=exports.DeviceTestHookCA=exports.TestCA=exports.UnitTestBuildCA=exports.CleanCA=exports.CompileNativeHookCA=exports.PreviewBuildCA=exports.GeneratedBuildProfileCA=exports.HotReloadBuildCA=exports.BuildPreviewerResCA=exports.LibraryBuildPreviewerResCA=exports.AssembleHarCA=exports.PreviewHookCompileResourceCA=exports.AssembleHspCA=exports.GenOnDeviceTestHapCA=exports.AssembleHapCA=exports.AssembleHqfCA=void 0;const hvigor_1=require("@ohos/hvigor"),find_target_product_js_1=require("../../common/find-target-product.js"),build_native_with_cmake_js_1=require("../build-native-with-cmake.js"),clean_js_1=require("../common/clean.js"),task_names_js_1=require("../common/task-names.js"),compile_resource_js_1=require("../compile-resource.js"),build_hot_reload_resource_js_1=require("../debugger/build-hot-reload-resource.js"),hot_reload_build_js_1=require("../debugger/hot-reload-build.js"),device_test_hook_js_1=require("../device-test-hook.js"),generate_loader_json_js_1=require("../generate-loader-json.js"),generated_build_profile_task_js_1=require("../generated-build-profile-task.js"),assemble_hap_js_1=require("../hook/assemble/assemble-hap.js"),assemble_har_js_1=require("../hook/assemble/assemble-har.js"),assemble_hqf_js_1=require("../hook/assemble/assemble-hqf.js"),assemble_hsp_js_1=require("../hook/assemble/assemble-hsp.js"),gen_on_device_test_hap_js_1=require("../hook/gen-on-device-test-hap.js"),compile_native_hook_js_1=require("../hook/native/compile-native-hook.js"),preview_hook_compile_resource_js_1=require("../hook/preview-hook-compile-resource.js"),build_har_previewer_res_js_1=require("../hook/previewer/build-har-previewer-res.js"),build_previewer_res_js_1=require("../hook/previewer/build-previewer-res.js"),preview_build_js_1=require("../hook/previewer/preview-build.js"),package_shared_tgz_js_1=require("../hsp/package-shared-tgz.js"),legacy_hook_compile_resource_js_1=require("../legacy-tasks/hook/legacy-hook-compile-resource.js"),legacy_generate_har_js_manifest_js_1=require("../legacy-tasks/legacy-generate-har-js-manifest.js"),legacy_generate_har_loader_json_js_1=require("../legacy-tasks/legacy-generate-har-loader-json.js"),legacy_generate_js_manifest_js_1=require("../legacy-tasks/legacy-generate-js-manifest.js"),legacy_generate_loader_json_js_1=require("../legacy-tasks/legacy-generate-loader-json.js"),legacy_package_hap_js_1=require("../legacy-tasks/legacy-package-hap.js"),package_hap_js_1=require("../package-hap.js"),pre_check_syscap_js_1=require("../pre-check-syscap.js"),preview_compile_resource_js_1=require("../preview-compile-resource.js"),replace_previewer_page_js_1=require("../previewer/replace-previewer-page.js"),sign_hap_js_1=require("../sign-hap.js"),task_creator_js_1=require("../task-creator.js"),test_js_1=require("../unitTest/test.js"),unit_test_build_js_1=require("../unitTest/unit-test-build.js");class AssembleHqfCA extends task_creator_js_1.GlobalTaskCreator{constructor(){super(...arguments),this.declareDepends=()=>[task_names_js_1.TaskNames.Task.SIGN_HQF.name],this.declareTaskDetail=()=>task_names_js_1.TaskNames.CommonHookTask.ASSEMBLE_HQF,this.provider=()=>new assemble_hqf_js_1.AssembleHqf(this.service)}}exports.AssembleHqfCA=AssembleHqfCA;class AssembleHapCA extends task_creator_js_1.GlobalTaskCreator{constructor(){super(...arguments),this.declareDepends=()=>{var e,s;return(null===(s=null===(e=(0,find_target_product_js_1.findTargetProduct)(this.service.getProjectModel()).buildOption)||void 0===e?void 0:e.packOptions)||void 0===s?void 0:s.buildAppSkipSignHap)&&hvigor_1.hvigorCore.isCommandEntryTask(task_names_js_1.TaskNames.CommonHookTask.ASSEMBLE_APP.name)?this.isFa?[legacy_package_hap_js_1.LegacyPackageHap.name]:[package_hap_js_1.PackageHap.name]:[sign_hap_js_1.SignHap.name]},this.declareTaskDetail=()=>task_names_js_1.TaskNames.CommonHookTask.ASSEMBLE_HAP,this.provider=()=>new assemble_hap_js_1.AssembleHap(this.service,this.isFa)}}exports.AssembleHapCA=AssembleHapCA;class GenOnDeviceTestHapCA extends task_creator_js_1.GlobalTaskCreator{constructor(){super(...arguments),this.declareDepends=()=>{var e,s;return(null===(s=null===(e=(0,find_target_product_js_1.findTargetProduct)(this.service.getProjectModel()).buildOption)||void 0===e?void 0:e.packOptions)||void 0===s?void 0:s.buildAppSkipSignHap)&&hvigor_1.hvigorCore.isCommandEntryTask(task_names_js_1.TaskNames.CommonHookTask.ASSEMBLE_APP.name)?this.isFa?[legacy_package_hap_js_1.LegacyPackageHap.name]:[package_hap_js_1.PackageHap.name]:[sign_hap_js_1.SignHap.name]},this.declareTaskDetail=()=>task_names_js_1.TaskNames.CommonHookTask.GEN_ON_DEVICE_TEST_HAP,this.provider=()=>new gen_on_device_test_hap_js_1.GenOnDeviceTestHap(this.service,this.isFa)}}exports.GenOnDeviceTestHapCA=GenOnDeviceTestHapCA;class AssembleHspCA extends task_creator_js_1.GlobalTaskCreator{constructor(){super(...arguments),this.declareDepends=()=>[package_shared_tgz_js_1.PackageSharedTgz.name],this.declareTaskDetail=()=>task_names_js_1.TaskNames.CommonHookTask.ASSEMBLE_HSP,this.provider=()=>new assemble_hsp_js_1.AssembleHsp(this.service,this.isFa)}}exports.AssembleHspCA=AssembleHspCA;class PreviewHookCompileResourceCA extends task_creator_js_1.TargetTaskCreator{constructor(){super(...arguments),this.provider=()=>new preview_hook_compile_resource_js_1.PreviewHookCompileResource(this.targetService),this.declareDepends=()=>[this.targetService.getSdkInfo().isPreviewCompileResourceIncrement(this.targetService.getTargetData().isHarmonyOS())?preview_compile_resource_js_1.PreviewCompileResource.name:compile_resource_js_1.CompileResource.name],this.declareTaskDetail=()=>task_names_js_1.TaskNames.CommonTask.PREVIEW_HOOK_COMPILE_RESOURCE}}exports.PreviewHookCompileResourceCA=PreviewHookCompileResourceCA;class AssembleHarCA extends task_creator_js_1.GlobalTaskCreator{constructor(){super(...arguments),this.declareDepends=()=>[this.isFa?task_names_js_1.TaskNames.LegacyFATask.PACKAGE_HAR.name:task_names_js_1.TaskNames.CommonTask.PACKAGE_SIGN_HAR.name],this.declareTaskDetail=()=>task_names_js_1.TaskNames.CommonHookTask.ASSEMBLE_HAR,this.provider=()=>new assemble_har_js_1.AssembleHar(this.service,this.isFa)}}exports.AssembleHarCA=AssembleHarCA;class LibraryBuildPreviewerResCA extends task_creator_js_1.GlobalTaskCreator{constructor(){super(...arguments),this.declareTaskDetail=()=>task_names_js_1.TaskNames.CommonHookTask.BUILD_PREVIEWER_RES,this.provider=()=>new build_har_previewer_res_js_1.BuildHarPreviewerRes(this.service,this.isFa)}declareDepends(){const e=[];return this.isFa?e.push(legacy_generate_har_loader_json_js_1.LegacyGenerateHarLoaderJson.name,legacy_generate_har_js_manifest_js_1.LegacyGenerateHarJsManifest.name):e.push(generate_loader_json_js_1.GenerateLoaderJson.name,preview_hook_compile_resource_js_1.PreviewHookCompileResource.name),e.push(pre_check_syscap_js_1.PreCheckSyscap.name),e}}exports.LibraryBuildPreviewerResCA=LibraryBuildPreviewerResCA;class BuildPreviewerResCA extends task_creator_js_1.GlobalTaskCreator{constructor(){super(...arguments),this.declareTaskDetail=()=>task_names_js_1.TaskNames.CommonHookTask.BUILD_PREVIEWER_RES,this.provider=()=>new build_previewer_res_js_1.BuildPreviewerRes(this.service,this.isFa)}declareDepends(){const e=[];return this.isFa?e.push(legacy_generate_loader_json_js_1.LegacyGenerateLoaderJson.name,legacy_generate_js_manifest_js_1.LegacyGenerateJsManifest.name,legacy_hook_compile_resource_js_1.LegacyHookCompileResource.name):e.push(generate_loader_json_js_1.GenerateLoaderJson.name,replace_previewer_page_js_1.ReplacePreviewerPage.name),e.push(pre_check_syscap_js_1.PreCheckSyscap.name),e}}exports.BuildPreviewerResCA=BuildPreviewerResCA;class HotReloadBuildCA extends task_creator_js_1.GlobalTaskCreator{constructor(){super(...arguments),this.declareDepends=()=>["HotReloadArkTS"],this.declareTaskDetail=()=>task_names_js_1.TaskNames.Task.HOT_RELOAD_BUILD,this.provider=()=>new hot_reload_build_js_1.HotReloadBuild(this.service)}}exports.HotReloadBuildCA=HotReloadBuildCA;class GeneratedBuildProfileCA extends task_creator_js_1.GlobalTaskCreator{constructor(e,s,a,r){super(e,s,a),this.isHar=!1,this.declareDepends=()=>[this.isHar?task_names_js_1.TaskNames.CommonTask.CREATE_HAR_BUILD_PROFILE.name:task_names_js_1.TaskNames.CommonTask.CREATE_BUILD_PROFILE.name],this.declareTaskDetail=()=>task_names_js_1.TaskNames.CommonHookTask.GENERATE_BUILD_PROFILE,this.provider=()=>new generated_build_profile_task_js_1.GeneratedBuildProfileTask(this.service,this.isHar),this.isHar=void 0!==r&&r}}exports.GeneratedBuildProfileCA=GeneratedBuildProfileCA;class PreviewBuildCA extends task_creator_js_1.GlobalTaskCreator{constructor(){super(...arguments),this.declareDepends=()=>[this.isFa?"LegacyPreviewCompileArkTS":"PreviewArkTS"],this.declareTaskDetail=()=>task_names_js_1.TaskNames.Task.PREVIEW_BUILD,this.provider=()=>new preview_build_js_1.PreviewBuild(this.service,this.isFa)}}exports.PreviewBuildCA=PreviewBuildCA;class CompileNativeHookCA extends task_creator_js_1.GlobalTaskCreator{constructor(){super(...arguments),this.declareDepends=()=>[build_native_with_cmake_js_1.BuildNativeWithCmake.name],this.declareTaskDetail=()=>task_names_js_1.TaskNames.CommonHookTask.COMPILE_NATIVE,this.provider=()=>new compile_native_hook_js_1.CompileNativeHook(this.service)}}exports.CompileNativeHookCA=CompileNativeHookCA;class CleanCA extends task_creator_js_1.GlobalTaskCreator{constructor(){super(...arguments),this.declareDepends=()=>[],this.declareTaskDetail=()=>task_names_js_1.TaskNames.CommonTask.CLEAN,this.provider=()=>new clean_js_1.Clean(this.service.getNode(),this.service)}}exports.CleanCA=CleanCA;class UnitTestBuildCA extends task_creator_js_1.GlobalTaskCreator{constructor(){super(...arguments),this.declareDepends=()=>[this.isFa?"LegacyUnitTestArkTS":"UnitTestArkTS"],this.declareTaskDetail=()=>task_names_js_1.TaskNames.Task.UNIT_TEST_BUILD,this.provider=()=>new unit_test_build_js_1.UnitTestBuild(this.service,this.isFa)}}exports.UnitTestBuildCA=UnitTestBuildCA;class TestCA extends task_creator_js_1.GlobalTaskCreator{constructor(){super(...arguments),this.declareDepends=()=>[task_names_js_1.TaskNames.Task.GENERATE_UNIT_TEST_RESULT.name],this.declareTaskDetail=()=>task_names_js_1.TaskNames.Task.TEST,this.provider=()=>new test_js_1.Test(this.service,this.isFa)}}exports.TestCA=TestCA;class DeviceTestHookCA extends task_creator_js_1.GlobalTaskCreator{constructor(){super(...arguments),this.declareDepends=()=>[task_names_js_1.TaskNames.Task.GENERATE_DEVICE_COVERAGE.name],this.declareTaskDetail=()=>task_names_js_1.TaskNames.Task.ON_DEVICE_TEST,this.provider=()=>new device_test_hook_js_1.DeviceTestHook(this.service,this.isFa)}}exports.DeviceTestHookCA=DeviceTestHookCA;class BuildHotReloadResourceCA extends task_creator_js_1.GlobalTaskCreator{constructor(){super(...arguments),this.declareDepends=()=>[generate_loader_json_js_1.GenerateLoaderJson.name,compile_resource_js_1.CompileResource.name],this.declareTaskDetail=()=>task_names_js_1.TaskNames.CommonHookTask.BUILD_HOT_RELOAD_RES,this.provider=()=>new build_hot_reload_resource_js_1.BuildHotReloadResource(this.service)}}exports.BuildHotReloadResourceCA=BuildHotReloadResourceCA;