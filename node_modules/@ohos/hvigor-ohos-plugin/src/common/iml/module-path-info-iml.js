"use strict";var __importDefault=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.ModulePathInfoIml=void 0;const hvigor_1=require("@ohos/hvigor"),path_1=__importDefault(require("path")),build_directory_const_js_1=require("../../const/build-directory-const.js"),common_const_js_1=require("../../const/common-const.js"),inject_util_js_1=require("../../utils/inject-util.js");class ModulePathInfoIml{constructor(t,e,r,i=build_directory_const_js_1.BuildDirConst.BUILD_ROOT){this._curModule=t,this._targetName=e,this._modulePath=t.getProjectDir(),this._productName=r,this._buildRoot=i}getPatchDir(){return path_1.default.resolve(this.getModuleBuildIntermediates(),build_directory_const_js_1.BuildDirConst.PATCH,this._targetName)}getObfuscationExportRulePath(){return path_1.default.resolve(this.getModuleBuildIntermediates(),"obfuscation",this._targetName,common_const_js_1.CommonConst.OBFUSCATION_TXT)}getIntermediatesJavaDir(){return path_1.default.resolve(this.getModuleBuildIntermediates(),"java",this._targetName)}getIntermediatesClassDir(){return path_1.default.resolve(this.getModuleBuildIntermediates(),"class",this._targetName)}getIntermediatesDexDir(){return path_1.default.resolve(this.getModuleBuildIntermediates(),"dex",this._targetName)}getIntermediatesShellClassDir(){return path_1.default.resolve(this.getModuleShellDir(),this.getBuildRoot(),"class")}getIntermediatesShellDexDir(){return path_1.default.resolve(this.getModuleShellDir(),this.getBuildRoot(),"dex")}getIntermediatesShellJavaDir(){return path_1.default.resolve(this.getShellSrcMain(),"java")}getIntermediatesApkDir(){return path_1.default.resolve(this.getModuleShellDir(),this.getBuildRoot(),"apk")}getBuildRoot(){return this._buildRoot}getModuleBuildPath(t=!0){return path_1.default.resolve(inject_util_js_1.InjectUtil.getBuildCacheParentDir(this._modulePath,path_1.default.join(hvigor_1.hvigorCore.getProject().getName(),this._modulePath.substring(hvigor_1.hvigorCore.getProject().getNodeDir().length)),t),this._buildRoot)}getModuleSrcPath(){return path_1.default.resolve(this._modulePath,build_directory_const_js_1.BuildDirConst.SRC)}getModuleSrcMainPath(){return path_1.default.resolve(this._modulePath,build_directory_const_js_1.BuildDirConst.SRC,build_directory_const_js_1.BuildDirConst.MAIN)}getModuleSrcMockPath(){return path_1.default.resolve(this._modulePath,build_directory_const_js_1.BuildDirConst.SRC,build_directory_const_js_1.BuildDirConst.MOCK)}getModulePath(){return this._modulePath}getModuleSrcMainResourceRawfileArkdataPath(){return path_1.default.resolve(this.getModuleSrcMainPath(),build_directory_const_js_1.BuildDirConst.RESOURCES,build_directory_const_js_1.BuildDirConst.RAW_FILE,build_directory_const_js_1.BuildDirConst.ARK_DATA,build_directory_const_js_1.BuildDirConst.SCHEMA)}getModuleSrcMainResourceRawfileUtdPath(){return path_1.default.resolve(this.getModuleSrcMainPath(),build_directory_const_js_1.BuildDirConst.RESOURCES,build_directory_const_js_1.BuildDirConst.RAW_FILE,build_directory_const_js_1.BuildDirConst.ARK_DATA,build_directory_const_js_1.BuildDirConst.UTD)}getModuleSrcMainResourceBaseProfilePath(){return path_1.default.resolve(this.getModuleSrcMainPath(),build_directory_const_js_1.BuildDirConst.RESOURCES_BASE_PROFILE_DIR)}getModulePreviewPath(){return path_1.default.resolve(this._modulePath,build_directory_const_js_1.BuildDirConst.PREVIEW_BUILD_PATH)}getModuleProductPath(t=!0){return path_1.default.resolve(this.getModuleBuildPath(t),this._productName)}getModulePreviewProductPath(){return path_1.default.resolve(this.getModulePreviewPath(),this._productName)}getModulePreviewIntermediatesResPath(){return path_1.default.resolve(this.getModulePreviewProductPath(),build_directory_const_js_1.BuildDirConst.INTERMEDIATES,build_directory_const_js_1.BuildDirConst.INTERMEDIATES_RES,this._targetName)}getModulePreviewIntermediatesProfilePath(){return path_1.default.resolve(this.getModulePreviewIntermediatesResPath(),build_directory_const_js_1.BuildDirConst.RESOURCES_BASE_PROFILE_DIR)}getModuleBuildIntermediates(){return path_1.default.resolve(this.getModuleProductPath(),build_directory_const_js_1.BuildDirConst.INTERMEDIATES)}getModuleBuildGenerated(){return path_1.default.resolve(this.getModuleProductPath(),build_directory_const_js_1.BuildDirConst.GENERATED)}getModulePreviewBuildGenerated(){return path_1.default.resolve(this.getModulePreviewProductPath(),build_directory_const_js_1.BuildDirConst.GENERATED)}getModuleBuildOutputPath(){return path_1.default.resolve(this.getModuleProductPath(!1),build_directory_const_js_1.BuildDirConst.BUILD_OUTPUTS,this._targetName)}getModuleBuildOhosTestOutputPath(){return path_1.default.resolve(this.getModuleProductPath(),build_directory_const_js_1.BuildDirConst.BUILD_OUTPUTS,common_const_js_1.CommonConst.OHOS_TEST)}getModuleRemoteHspPath(){return path_1.default.resolve(this.getModuleProductPath(),build_directory_const_js_1.BuildDirConst.BUILD_CACHE,build_directory_const_js_1.BuildDirConst.REMOTE_HSP)}getIntermediatesMergeRes(){return path_1.default.resolve(this.getModuleBuildIntermediates(),build_directory_const_js_1.BuildDirConst.INTERMEDIATES_MERGE_RES,this._targetName)}getIntermediatesMergeFile(){return path_1.default.resolve(this.getIntermediatesMergeRes(),build_directory_const_js_1.BuildArtifactConst.MERGE_RES_FILE_INDEX)}getIntermediatesMergeProfile(){return path_1.default.resolve(this.getModuleBuildIntermediates(),build_directory_const_js_1.BuildDirConst.INTERMEDIATES_MERGE_PROFILE,this._targetName,common_const_js_1.CommonConst.MODULE_JSON)}getIntermediatesProcessProfileDir(){return path_1.default.resolve(this.getModuleBuildIntermediates(),build_directory_const_js_1.BuildDirConst.INTERMEDIATES_PROCESS_PROFILE,this._targetName)}getGenerateSourceR(){return path_1.default.resolve(this.getModuleBuildGenerated(),build_directory_const_js_1.BuildDirConst.R,this._targetName)}getGeneratePmDir(){return path_1.default.resolve(this.getModuleBuildGenerated(),build_directory_const_js_1.BuildDirConst.PM_DIR,this._targetName)}getGenerateBuildProfilePath(t){return path_1.default.resolve(this.getGenerateBuildProfileDir(),t,build_directory_const_js_1.BuildArtifactConst.BUILD_PROFILE_FILE)}getHarGenerateBuildProfilePath(){return path_1.default.resolve(this._modulePath,build_directory_const_js_1.BuildArtifactConst.BUILD_PROFILE_FILE)}getGenerateBuildProfileDir(){return path_1.default.resolve(this.getModuleBuildGenerated(),build_directory_const_js_1.BuildArtifactConst.PROFILE_DIR)}getPreviewGenerateSourceR(){return path_1.default.resolve(this.getModulePreviewBuildGenerated(),build_directory_const_js_1.BuildDirConst.R,this._targetName)}getIntermediatesProcessProfile(){return path_1.default.resolve(this.getModuleBuildIntermediates(),build_directory_const_js_1.BuildDirConst.INTERMEDIATES_PROCESS_PROFILE,this._targetName,common_const_js_1.CommonConst.MODULE_JSON)}getIntermediatesProcessLegacyProfile(){return path_1.default.resolve(this.getModuleBuildIntermediates(),build_directory_const_js_1.BuildDirConst.INTERMEDIATES_PROCESS_PROFILE,this._targetName,common_const_js_1.CommonConst.CONFIG_JSON)}getIntermediatesRes(){return path_1.default.resolve(this.getModuleBuildIntermediates(),build_directory_const_js_1.BuildDirConst.INTERMEDIATES_RES,this._targetName)}getIntermediatesResProfilePath(){return path_1.default.resolve(this.getIntermediatesRes(),build_directory_const_js_1.BuildDirConst.RESTOOL_BUILD_RESOURCES,build_directory_const_js_1.BuildDirConst.BASE,build_directory_const_js_1.BuildDirConst.PROFILE)}getIntermediatesResArkDataPath(){return path_1.default.resolve(this.getIntermediatesRes(),build_directory_const_js_1.BuildDirConst.RESTOOL_BUILD_RESOURCES,build_directory_const_js_1.BuildDirConst.RAW_FILE,build_directory_const_js_1.BuildDirConst.ARK_DATA,build_directory_const_js_1.BuildDirConst.SCHEMA)}getIntermediatesFaAssetsPath(t){return path_1.default.resolve(this.getModuleBuildIntermediates(),`${build_directory_const_js_1.BuildDirConst.JS_BUILD_ASSETS}_${this._curModule.getCompileMode(t)}`,this._targetName)}getInterMediatesLoaderOutPath(){return path_1.default.resolve(this.getModuleBuildIntermediates(),build_directory_const_js_1.BuildDirConst.LOADER_OUT,this._targetName)}getInterMediatesAssetsPath(){return path_1.default.resolve(this.getModuleBuildIntermediates(),build_directory_const_js_1.BuildDirConst.JS_BUILD_ASSETS,this._targetName)}getInterMediatesLoaderOutLitePath(){return path_1.default.resolve(this.getModuleBuildIntermediates(),build_directory_const_js_1.BuildDirConst.LOADER_OUT_LITE,this._targetName)}getIntermediatesLoaderPath(){return path_1.default.resolve(this.getModuleBuildIntermediates(),build_directory_const_js_1.BuildDirConst.LOADER,this._targetName)}getIntermediatesPkgContextInfoPath(){return path_1.default.resolve(this.getIntermediatesLoaderPath(),common_const_js_1.CommonConst.PKG_CONTEXT_INFO_JSON)}getIntermediatesApPath(){return path_1.default.resolve(this.getModuleBuildIntermediates(),"ap")}getModuleBuildCachePath(){return path_1.default.resolve(this.getModuleProductPath(),build_directory_const_js_1.BuildDirConst.BUILD_CACHE,this._targetName)}getIntermediatesMergeLegacyProfile(){return path_1.default.resolve(this.getModuleBuildIntermediates(),build_directory_const_js_1.BuildDirConst.INTERMEDIATES_MERGE_PROFILE,this._targetName,common_const_js_1.CommonConst.CONFIG_JSON)}getIntermediatesLegacyManifestJson(){return path_1.default.resolve(this.getModuleBuildIntermediates(),build_directory_const_js_1.BuildDirConst.LEGACY_MANIFEST,this._targetName)}getIntermediatesPackInfoDir(){return path_1.default.resolve(this.getModuleBuildIntermediates(),build_directory_const_js_1.BuildDirConst.LEGACY_MANIFEST,this._targetName)}getIntermediatesProcessLibs(){return path_1.default.resolve(this.getModuleBuildIntermediates(),build_directory_const_js_1.BuildDirConst.LIBS,this._targetName)}getIntermediatesStrippedLibsDir(){return path_1.default.resolve(this.getModuleBuildIntermediates(),build_directory_const_js_1.BuildDirConst.STRIPPED_NATIVE_LIBS,this._targetName)}getIntermediatesPatch(){return path_1.default.resolve(this.getModuleBuildIntermediates(),build_directory_const_js_1.BuildDirConst.PATCH,this._targetName)}getIntermediatesSysCap(){return path_1.default.resolve(this.getModuleBuildIntermediates(),build_directory_const_js_1.BuildDirConst.SYSCAP,this._targetName)}getIntermediatesRouterMap(t){return path_1.default.resolve(this.getModuleBuildIntermediates(),build_directory_const_js_1.BuildDirConst.INTERMEDIATES_ROUTER_MAP_TEMP_DIR,this._targetName,`${t}.json`)}getCppOutputDir(){return path_1.default.resolve((0,hvigor_1.isCI)()?inject_util_js_1.InjectUtil.getBuildCacheParentDir(this._modulePath,path_1.default.join(hvigor_1.hvigorCore.getProject().getName(),this._modulePath.substring(hvigor_1.hvigorCore.getProject().getNodeDir().length))):this._modulePath,build_directory_const_js_1.BuildDirConst.CPP_OUTPUT)}getNinjaWorkDir(){return path_1.default.resolve(this.getCppOutputDir(),this._productName,this._targetName)}getModuleShellDir(){return path_1.default.resolve(this.getModuleBuildIntermediates(),build_directory_const_js_1.BuildDirConst.SHELL,this._targetName)}getShellResourceDir(){return path_1.default.resolve(this.getShellSrcMain(),build_directory_const_js_1.BuildDirConst.INTERMEDIATES_RES)}getShellSrcMain(){return path_1.default.resolve(this.getModuleShellDir(),build_directory_const_js_1.BuildDirConst.SRC,build_directory_const_js_1.BuildDirConst.MAIN)}getShellBuildResourceDir(){return path_1.default.resolve(this.getModuleShellDir(),this.getBuildRoot(),build_directory_const_js_1.BuildDirConst.INTERMEDIATES_RES)}getIntermediatesCppOutPut(){return path_1.default.resolve(this.getModuleBuildIntermediates(),build_directory_const_js_1.BuildDirConst.CMAKE,this._targetName,build_directory_const_js_1.BuildDirConst.OBJ)}getIntermediatesLiteBinSource(){return path_1.default.resolve(this.getModuleBuildIntermediates(),"lite_res",this._targetName)}getModuleBinOutput(){return path_1.default.resolve(this.getModuleBuildOutputPath(),"bin")}getIntermediatesLiteSource(){return path_1.default.resolve(this.getModuleBuildIntermediates(),"lite_source",this._targetName)}getIntermediatesTemp(){return path_1.default.resolve(this.getModuleBuildIntermediates(),this._targetName,build_directory_const_js_1.BuildDirConst.TEMP_DIR)}getBuildConfigPath(t){return path_1.default.resolve(t?this.getModulePreviewPath():this.getModuleBuildPath(),"config","buildConfig.json")}getIntermediatesOutputMetadata(){return path_1.default.resolve(this.getModuleBuildIntermediates(),build_directory_const_js_1.BuildDirConst.HAP_METADATA,this._targetName,"output_metadata.json")}getIntermediatesHspOutputMetadata(){return path_1.default.resolve(this.getModuleBuildIntermediates(),build_directory_const_js_1.BuildDirConst.HSP_METADATA,this._targetName,build_directory_const_js_1.BuildArtifactConst.OUTPUT_METADATA_JSON)}getFromConfigPathByTargetName(t,e,r){if(r)return path_1.default.resolve(t.getSourceSetByTargetName(this._targetName).getTargetResPath(),"base","profile",`${r}.json`)}getSyscapJsonPathInfo(t){const e=t.getSourceRootByTargetName(this._targetName);return path_1.default.resolve(e,common_const_js_1.CommonConst.SYSCAP_JSON)}getPreviewIntermediatesResModuleJsonPath(){return path_1.default.resolve(this.getModulePreviewIntermediatesResPath(),common_const_js_1.CommonConst.MODULE_JSON)}getPreviewIntermediatesMainPagesJsonPath(){return path_1.default.resolve(this.getModulePreviewIntermediatesProfilePath(),build_directory_const_js_1.BuildArtifactConst.MAIN_PAGES_JSON)}getUnitTestTemplatePath(){return path_1.default.resolve(this.getModuleBuildPath(),"testability")}getIntermediatesCangjieOutPut(){return path_1.default.resolve(this.getModuleBuildIntermediates(),"cj","extend_libs",this._targetName)}getIntegratedHspOutputPath(){return path_1.default.resolve(this.getModuleBuildOutputPath(),build_directory_const_js_1.BuildDirConst.INTEGRATED_HSP)}getDefaultSourceMapPath(){return path_1.default.resolve(this.getModuleBuildPath(),this._productName,build_directory_const_js_1.BuildDirConst.BUILD_OUTPUTS,this._targetName,build_directory_const_js_1.BuildDirConst.MAPPING)}getPackageHapProductPath(){return path_1.default.resolve(this.getModuleBuildIntermediates(),build_directory_const_js_1.BuildDirConst.PACKAGE_HAP,this._targetName)}getHspResourceStr(t){return inject_util_js_1.InjectUtil.isLocalTest()?path_1.default.resolve(t,common_const_js_1.UnitTestConst.TEST_BUILD_ROOT,this._productName,build_directory_const_js_1.BuildDirConst.INTERMEDIATES,build_directory_const_js_1.BuildDirConst.INTERMEDIATES_RES,this._targetName,build_directory_const_js_1.BuildDirConst.RESOURCE_STR):path_1.default.resolve(t,build_directory_const_js_1.BuildDirConst.BUILD_ROOT,this._productName,build_directory_const_js_1.BuildDirConst.INTERMEDIATES,build_directory_const_js_1.BuildDirConst.INTERMEDIATES_RES,this._targetName,build_directory_const_js_1.BuildDirConst.RESOURCE_STR)}getResourceStr(){return path_1.default.resolve(this.getIntermediatesRes(),build_directory_const_js_1.BuildDirConst.RESOURCE_STR)}}exports.ModulePathInfoIml=ModulePathInfoIml;