"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.LegacyAbilityModelImpl=void 0;const ability_type_enum_js_1=require("../../enum/ability-type-enum.js"),res_model_loader_js_1=require("../../utils/loader/file/res-model-loader.js"),ohos_logger_js_1=require("../../utils/log/ohos-logger.js");class LegacyAbilityModelImpl{constructor(i,e){this._log=ohos_logger_js_1.OhosLogger.getLogger(LegacyAbilityModelImpl.name),this._configObj=res_model_loader_js_1.resModelLoader.getConfigJson(i),this._configFile=i,this._abilityName=e,this._abilityObj=this.findAbilityByName(),this._jsObj=this.findJsByName()}findJsByName(){var i;if(!this._abilityObj||!this.hasJsObj())return;const e=null!==(i=this._configObj.module.js)&&void 0!==i?i:[];for(const i of e)if(i.name===this._abilityName)return i;this._log._buildError("A Page ability requires a JS component with the same name.")._solution(`Make sure a JS component named ${this._abilityName} is contained in the config.json file.`)._file(this._configFile)._printErrorAndExit()}hasJsObj(){return this.getType()===ability_type_enum_js_1.AbilityTypeEnum.PAGE}findAbilityByName(){var i;const e=null!==(i=this._configObj.module.abilities)&&void 0!==i?i:[];for(const i of e)if(i.name===this._abilityName)return i;throw this._log._buildError(`${this._abilityName} does not exist in config.json.`)._file(this._configFile)._printErrorAndExit(),new Error("Internal error.")}getRelateSrcPath(){const i=this._abilityObj.srcPath;return void 0===i?this.getName():i}getName(){return this._abilityName}getSrcLanguage(){return this._abilityObj.srcLanguage}getType(){return ability_type_enum_js_1.AbilityTypeEnum.valueOf(this._abilityObj)}getConfigJsonJsObj(){return this._jsObj}}exports.LegacyAbilityModelImpl=LegacyAbilityModelImpl;