"use strict";var __importDefault=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.JsArkComponent=void 0;const path_1=__importDefault(require("path")),node_command_builder_js_1=require("../../builder/node-command-builder.js"),ohos_logger_js_1=require("../../utils/log/ohos-logger.js"),process_utils_js_1=require("../../utils/process-utils.js");class JsArkComponent{constructor(e){this._log=ohos_logger_js_1.OhosLogger.getLogger(JsArkComponent.name),this.ts2abcVersion="",this.ts2abcToolPath=path_1.default.resolve(e,"bin","ark","ts2abc.js")}getArkVersion(e){if(""!==this.ts2abcVersion)return this.ts2abcVersion;try{let s=(new node_command_builder_js_1.NodeCommandBuilder).addJsPath(this.ts2abcToolPath);return s=e?s.getCompatibleTsVersion(e):s.getTsVersion(),this._log.debug(s.build()),this.ts2abcVersion=(new process_utils_js_1.ProcessUtils).executeSync(s.build(),{stdio:"pipe"}).stdout.toString(),this.ts2abcVersion}catch(e){return this._log.debug("Execute command error.Cannot get ark version."),""}}}exports.JsArkComponent=JsArkComponent;