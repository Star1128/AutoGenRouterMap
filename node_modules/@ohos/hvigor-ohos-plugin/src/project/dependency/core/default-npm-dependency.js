"use strict";var __createBinding=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n);var s=Object.getOwnPropertyDescriptor(t,n);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,i,s)}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),__setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),__importStar=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&__createBinding(t,e,n);return __setModuleDefault(t,e),t},__importDefault=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.DefaultNpmDependency=void 0;const fs_extra_1=__importDefault(require("fs-extra")),path=__importStar(require("path")),build_directory_const_js_1=require("../../../const/build-directory-const.js"),copy_resources_util_js_1=require("../../../utils/copy-resources-util.js"),dependency_manager_js_1=require("../dependency-manager.js");class DefaultNpmDependency{constructor(e){var t,n,i;this._isLocal=!1,this._dependencyName=e.getDependencyName(),this._dependedVersion=e.getDependedVersion(),this._lastDependencyName=e.getLastDependencyName(),this._dependencyVersion=e.getDependencyVersion(),this._dependencyRootPath=e.getDependencyRootPath(),this._dependencies=e.getDependencies(),this._pkgJsonPath=e.getPkgJsonPath(),this._pkgJsonObj=e.getPkgJsonObj(),this._moduleJsonObj=e.getModuleJsonObj(),this._useNormalizedOHMUrl=null===(n=null===(t=this._pkgJsonObj)||void 0===t?void 0:t.metadata)||void 0===n?void 0:n.useNormalizedOHMUrl,this._pkgJsonName=this._pkgJsonObj.name,this._mainFilePath=path.resolve(this._dependencyRootPath,this._pkgJsonObj.main||"index.js"),this._typesFilePath=path.resolve(this._dependencyRootPath,null!==(i=this._pkgJsonObj.types)&&void 0!==i?i:"index.d.ts"),this._mainFileRelativePath=this.getMainFileRelativePath(this._dependencyRootPath,this._pkgJsonObj),this._dependencyType=e.getDependencyType(),this._dependencyEnum=e.getDependencyEnum(),this._isLocal=e.isLocal()}getPackageJsonPath(){return this._pkgJsonPath}getPackageFilePath(){return this._pkgJsonPath}getPackageJsonObj(){return this._pkgJsonObj}getPackageName(){return this._pkgJsonName}getDependencyName(){return this._dependencyName}getDependedVersion(){return this._dependedVersion}getDependencyVersion(){return this._dependencyVersion}getDependencyRootPath(){return this._dependencyRootPath}getDependencyMainFilePath(){return this._mainFilePath}getDependencyTypesFilePath(){return this._typesFilePath}getDependencyType(){return this._dependencyType}getDependencyEnum(){return this._dependencyEnum}getDependencies(){return this._dependencies}getModuleJsonObj(){return this._moduleJsonObj}getDependencyMainFileRelativePath(){return this._mainFileRelativePath}getUseNormalizedOHMUrl(){return this._useNormalizedOHMUrl}hasNative(){return fs_extra_1.default.existsSync(path.resolve(this._dependencyRootPath,"libs"))||fs_extra_1.default.existsSync(path.resolve(this._dependencyRootPath,"include"))}isLocal(){return this._isLocal}getLastDependencyName(){return this._lastDependencyName}getMainFileRelativePath(e,t){const n=(0,dependency_manager_js_1.getEntryMainFilePath)(e,t);return n?(0,copy_resources_util_js_1.toUnixPath)(path.relative(this._dependencyRootPath,n)):""}getDefaultLibsDir(){return path.resolve(this._dependencyRootPath,build_directory_const_js_1.BuildDirConst.LIBS)}}exports.DefaultNpmDependency=DefaultNpmDependency;