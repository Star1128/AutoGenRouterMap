"use strict";var __importDefault=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.InjectUtil=void 0;const hvigor_1=require("@ohos/hvigor"),hvigor_config_loader_js_1=require("@ohos/hvigor/src/common/util/hvigor-config-loader.js"),path_1=__importDefault(require("path")),common_const_js_1=require("../const/common-const.js"),ohos_logger_js_1=require("./log/ohos-logger.js");class InjectUtil{static isHotReload(){return"true"===hvigor_1.hvigorCore.getExtraConfig().get(common_const_js_1.CommonConst.HOT_RELOAD)&&this.startParams.daemon}static isColdReload(){return hvigor_1.hvigorCore.isCommandEntryTask("assembleDevHqf")}static isDaemon(){return this.startParams.daemon}static isPreviewProcess(){return"true"===hvigor_1.hvigorCore.getExtraConfig().get(common_const_js_1.CommonConst.PREVIEW_MODE)}static isUnitTestProcess(){return"true"===hvigor_1.hvigorCore.getExtraConfig().get(common_const_js_1.CommonConst.UNIT_TEST_MODE)}static isOhosTestCoverage(){return"true"===hvigor_1.hvigorCore.getExtraConfig().get(common_const_js_1.CommonConst.OHOS_TEST_COVERAGE)}static getCoveragePathFilter(){return hvigor_1.hvigorCore.getExtraConfig().get(common_const_js_1.CommonConst.COVERAGE_PATH_FILTER)}static getCoverageMode(){return hvigor_1.hvigorCore.getExtraConfig().get(common_const_js_1.CommonConst.COVERAGE_MODE)}static isDebugLineEnable(){return"true"===hvigor_1.hvigorCore.getExtraConfig().get(common_const_js_1.CommonConst.DEBUG_LINE)}static getBuildCacheParentDir(t,o,e=!0){const r=InjectUtil.getBuildDir(e);return r?path_1.default.isAbsolute(r)?(this._log&&!this.customBuildDirHasLogged&&(this._log.warn("Please ensure no projects of the same name have the same build cache dir."),this.customBuildDirHasLogged=!0),path_1.default.join(r,o.replace(":",path_1.default.sep))):(this._log&&!this.customBuildDirHasLogged&&(this._log.warn(`Invalid build cache dir: ${r}`),this.customBuildDirHasLogged=!0),t):t}static getModuleBuildRootPath(t){return InjectUtil.getBuildCacheParentDir(t,path_1.default.join(hvigor_1.hvigorCore.getProject().getName(),t.substring(hvigor_1.hvigorCore.getProject().getNodeDir().length)))}static getBuildDir(t=!0){let o=hvigor_1.hvigorCore.getExtraConfig().get(common_const_js_1.CommonConst.BUILD_CACHE_DIR);if((!o||t)&&(o||(o=hvigor_config_loader_js_1.HvigorConfigLoader.getInstance().getPropertiesConfigValue(common_const_js_1.CommonConst.BUILD_DIR_KEY),o)))return o.replace(/^'|'$/g,"").replace(/^"|"$/g,"")}static isLocalTest(){return"true"===hvigor_1.hvigorCore.getExtraConfig().get(common_const_js_1.CommonConst.IS_LOCAL_TEST)}}exports.InjectUtil=InjectUtil,InjectUtil._log=ohos_logger_js_1.OhosLogger.getLogger("InjectUtil"),InjectUtil.startParams=hvigor_1.hvigorCore.getParameter().getStartParams(),InjectUtil.customBuildDirHasLogged=!1;