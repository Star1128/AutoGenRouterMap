"use strict";var __importDefault=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.getJson5Obj=void 0;const hvigor_1=require("@ohos/hvigor"),fs_extra_1=__importDefault(require("fs-extra")),os_1=__importDefault(require("os")),path_1=__importDefault(require("path")),error_code_map_js_1=require("../error/error-code-map.js"),ohos_logger_js_1=require("./log/ohos-logger.js"),log=ohos_logger_js_1.OhosLogger.getLogger("json-util");function getJson5Obj(e,r="utf-8"){if(!fs_extra_1.default.existsSync(e))return;const o=fs_extra_1.default.readFileSync(path_1.default.resolve(e),{encoding:r});try{return(0,hvigor_1.parseJsonText)(o)}catch(r){if(r instanceof SyntaxError){const o=r.message.split("at ");2===o.length&&log._errorCode(error_code_map_js_1.ECM.DECE.COMMON_UTILS).errorMessageExit(`${o[0].trim()}${os_1.default.EOL}\t at ${e}:${o[1].trim()}`)}log._errorCode(error_code_map_js_1.ECM.DECE.COMMON_UTILS).errorMessageExit(`${e} is not the correct JSON/JSON5 format.`)}}exports.getJson5Obj=getJson5Obj;