"use strict";var __importDefault=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.getOhosTestAbilityConfig=exports.getOhosTestIntermediatesSrcResource=exports.getOhosTestIntermediatesEtsPath=exports.getOhosTestIntermediatesRelativePath=exports.getOhosTestIntermediatesPath=exports.isTemplatesAfterSourceCodeMigration=void 0;const path_1=__importDefault(require("path")),hvigor_1=require("@ohos/hvigor"),file_util_js_1=require("./file-util.js"),res_model_loader_js_1=require("./loader/file/res-model-loader.js"),common_const_js_1=require("../const/common-const.js");function isTemplatesAfterSourceCodeMigration(e){var t;const s=res_model_loader_js_1.resModelLoader.getModuleJson(path_1.default.resolve(e,common_const_js_1.CommonConst.MODULE_JSON5)),r=null===(t=null==s?void 0:s.module)||void 0===t?void 0:t.abilities;if(r&&r.length){return!r[0].srcEntry}return!(file_util_js_1.FileUtil.matchingFile(path_1.default.resolve(e,"ets/testrunner/OpenHarmonyTestRunner.ets"),!0)||file_util_js_1.FileUtil.matchingFile(path_1.default.resolve(e,"ets/testrunner/OpenHarmonyTestRunner.ts"),!0))}function getOhosTestIntermediatesPath(e){return path_1.default.resolve(e,getOhosTestIntermediatesRelativePath())}function getOhosTestIntermediatesRelativePath(){var e;return`build/${null!==(e=hvigor_1.hvigor.getParameter().getExtParam("product"))&&void 0!==e?e:"default"}/intermediates`}function getOhosTestIntermediatesEtsPath(e){return path_1.default.resolve(getOhosTestIntermediatesPath(e),"src/ohosTest/ets")}function getOhosTestIntermediatesSrcResource(e){return path_1.default.resolve(getOhosTestIntermediatesPath(e),"src/ohosTest/resources")}function getOhosTestAbilityConfig(){return{description:"$string:module_test_desc",mainElement:"TestAbility",pages:"$profile:test_pages",abilities:[{name:"TestAbility",srcEntry:"./ets/testability/TestAbility.ets",description:"$string:TestAbility_desc",icon:"$media:icon",label:"$string:TestAbility_label",exported:!0,startWindowIcon:"$media:icon",startWindowBackground:"$color:start_window_background"}]}}exports.isTemplatesAfterSourceCodeMigration=isTemplatesAfterSourceCodeMigration,exports.getOhosTestIntermediatesPath=getOhosTestIntermediatesPath,exports.getOhosTestIntermediatesRelativePath=getOhosTestIntermediatesRelativePath,exports.getOhosTestIntermediatesEtsPath=getOhosTestIntermediatesEtsPath,exports.getOhosTestIntermediatesSrcResource=getOhosTestIntermediatesSrcResource,exports.getOhosTestAbilityConfig=getOhosTestAbilityConfig;