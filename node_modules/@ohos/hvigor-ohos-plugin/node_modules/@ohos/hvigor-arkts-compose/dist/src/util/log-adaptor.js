"use strict";var __importDefault=this&&this.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.matchErrorMessage=exports.ArkTsLogAdaptor=void 0;const path_1=__importDefault(require("path")),log_message_js_1=require("./log-message.js"),utils_js_1=require("./utils.js"),ErrorCodeJsonPath=path_1.default.resolve(__dirname,"../../../res/error/errorcode.json");class ArkTsLogAdaptor{constructor(s,e){this.logMessage=new log_message_js_1.LogMessage(new Date,e);const r=s.split(ArkTsLogAdaptor.SOLUTIONS_KEY);r&&2===r.length?(this.logMessage.message=r[0],this.logMessage.solutions=r[1].split(">").map((s=>s.trimEnd().trim())).filter((s=>s.length>0)),this.logMessage.moreInfo=matchErrorMessage(this.logMessage.message,ErrorCodeJsonPath)):this.logMessage.message=s}getLogMessage(){return this.logMessage}}function matchErrorMessage(s,e){const r=(0,utils_js_1.getJson5Obj)(e).errorMessages.find((e=>s.includes(e.checkMessage)));if(r)return r.moreInfo}exports.ArkTsLogAdaptor=ArkTsLogAdaptor,ArkTsLogAdaptor.SOLUTIONS_KEY="Solutions:",exports.matchErrorMessage=matchErrorMessage;