"use strict";var __importDefault=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.HookEventFactory=exports.CompileEventFactory=void 0;const crypto_1=__importDefault(require("crypto")),compile_event_js_1=require("./compile-event.js"),perf_constants_js_1=require("./perf-constants.js"),reserveWords=new Set([perf_constants_js_1.ROLLUP_EVENT_NAME]);class CompileEventFactory{static createEvent(e,t,o,r){const n=new compile_event_js_1.CompileEvent(crypto_1.default.randomUUID(),e,process.pid,r??"Main Thread",t,o);return CompileEventFactory.compileEvents.set(n.getId(),n),n}static removeIf(e){CompileEventFactory.compileEvents.forEach(((t,o)=>{e(t)&&CompileEventFactory.removeEvent(o)}))}static getEvents(){return CompileEventFactory.compileEvents}static removeEvent(e){CompileEventFactory.compileEvents.delete(e)}static getEventById(e){return CompileEventFactory.compileEvents.get(e)}static getHookEventFactory(e,t){const o=`(${e}) - ${t}`;return CompileEventFactory.hookEventFactories.has(o)||CompileEventFactory.hookEventFactories.set(o,new HookEventFactory(o)),CompileEventFactory.hookEventFactories.get(o)}static clear(){CompileEventFactory.compileEvents.clear()}}exports.CompileEventFactory=CompileEventFactory,CompileEventFactory.compileEvents=new Map,CompileEventFactory.hookEventFactories=new Map;class HookEventFactory{constructor(e){this.category=e}createEvent(e){if(reserveWords.has(e))return;const t=new compile_event_js_1.CompileEvent(crypto_1.default.randomUUID(),e,process.pid,"Main Thread",0,0,!0).setCategory(this.category);return CompileEventFactory.compileEvents.set(t.getId(),t),t}}exports.HookEventFactory=HookEventFactory;