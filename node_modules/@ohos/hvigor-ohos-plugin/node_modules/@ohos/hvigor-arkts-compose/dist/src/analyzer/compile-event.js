"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.CompileEvent=exports.DURATION_EVENT=exports.CONTINUAL_EVENT=void 0;const compile_event_factory_js_1=require("./compile-event-factory.js");exports.CONTINUAL_EVENT="continual",exports.DURATION_EVENT="duration";class CompileEvent{constructor(t,e,i,r,s,n,a){this.head={id:t,name:e,description:"",type:"duration"},this.body={pid:i,tid:r,startTime:-1},this.additional={children:[],state:"created",totalTime:s,frequency:n,fromHook:a??!1}}isFromHook(){return this.additional.fromHook}start(t){return this.setState("running"),this.setStartTime(t),this}stop(t="success",e){"failed"!==this.additional.state&&"success"!==this.additional.state&&"warn"!==this.additional.state&&(this.additional.children.forEach((e=>compile_event_factory_js_1.CompileEventFactory.getEventById(e)?.stop(t))),this.body.endTime=e??Number(process.hrtime.bigint()),this.setState(t))}startAsyncEvent(t){return this.start(t)}stopAsyncEvent(t="success",e){this.body.endTime=e??Number(process.hrtime.bigint()),this.setState(t)}setDescription(t){return this.head.description=t,this}setState(t){return this.additional.state=t,this}setCategory(t){return this.additional.category=t,this}getCategory(){return this.additional.category}createSubEvent(t){const e=compile_event_factory_js_1.CompileEventFactory.createEvent(t,0,0,this.getTid()).setParent(this.getId());return this.addChild(e.getId()),e}setStartTime(t){return this.body.startTime=t??Number(process.hrtime.bigint()),this}getStartTime(){return this.body.startTime}setEndTime(t){return this.body.endTime=t??Number(process.hrtime.bigint()),this}getEndTime(){return this.body.endTime}setMemory(t){return this.additional.memory=t,this}getMemory(){return this.additional.memory}addChild(t){this.additional.children.push(t)}setChildren(t){this.additional.children=t}setParent(t){return this.additional.parent=t,this}getParent(){return this.additional.parent}getName(){return this.head.name}getId(){return this.head.id}getChildren(){return this.additional.children}getTid(){return this.body.tid}setTid(t){return this.body.tid=t,this}setName(t){this.head.name=t}setType(t){this.head.type=t}inCreFrequency(){return this.additional.frequency++,this}inCreTotalTime(t){return void 0!==t.getEndTime()&&(this.additional.totalTime+=t.getEndTime()-t.getStartTime()),this}}exports.CompileEvent=CompileEvent;