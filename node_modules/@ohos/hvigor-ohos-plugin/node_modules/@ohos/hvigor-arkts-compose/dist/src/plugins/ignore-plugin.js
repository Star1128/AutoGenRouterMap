"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ignorePlugin=void 0;const constants_js_1=require("../util/constants.js"),arkts_pack_js_1=require("../arkts-pack.js"),ignoreVirtualFilePrefix="\0hvigor_ignore_";function ignorePlugin(e,r){const n=new Set,o=(0,arkts_pack_js_1.loadAceBuildJson)(r.aceBuildJson);if(r.compileMode===constants_js_1.ESMODULE&&o.harNameOhmMap)for(const e in o.harNameOhmMap)n.add(new RegExp(`^(${e})($|/\\S+)`));if("har"===r.moduleType&&r.external)for(const e of r.external)n.add(new RegExp(`^(${e})($|/\\S+)`));return{name:"ignorePlugin",resolveId:function(r,o,t){if(e.test(r))return"\0hvigor_ignore_"+r.replace(/\\/g,"_").replace(/\//g,"_");if(checkHarExternal(n,t)){const{oriImportee:e}=t.custom["node-resolve"];return{id:e,external:!0}}return null},load:e=>e.startsWith("\0hvigor_ignore_")?"":null}}function checkHarExternal(e,r){if(r.custom["node-resolve"]){const{oriImportee:n}=r.custom["node-resolve"];return Array.from(e).some((e=>e.test(n)))}return!1}exports.ignorePlugin=ignorePlugin;