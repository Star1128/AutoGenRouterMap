"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.resolvePackageExports=void 0;const resolvePackageImportsExports_js_1=require("./resolvePackageImportsExports.js"),resolvePackageTarget_js_1=require("./resolvePackageTarget.js"),utils_js_1=require("./utils.js");async function resolvePackageExports(e,s,r){if((0,utils_js_1.isMixedExports)(r))throw new utils_js_1.InvalidConfigurationError(e,"All keys must either start with './', or without one.");if("."===s){let s;if("string"==typeof r||Array.isArray(r)||(0,utils_js_1.isConditions)(r)?s=r:(0,utils_js_1.isMappings)(r)&&(s=r["."]),s){const r=await(0,resolvePackageTarget_js_1.resolvePackageTarget)(e,{target:s,subpath:""});if(r)return r}}else if((0,utils_js_1.isMappings)(r)){const t=await(0,resolvePackageImportsExports_js_1.resolvePackageImportsExports)(e,{matchKey:s,matchObj:r});if(t)return t}throw new utils_js_1.InvalidModuleSpecifierError(e)}exports.resolvePackageExports=resolvePackageExports;