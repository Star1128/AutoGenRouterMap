"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.resolvePackageImportsExports=void 0;const resolvePackageTarget_js_1=require("./resolvePackageTarget.js"),utils_js_1=require("./utils.js");async function resolvePackageImportsExports(e,{matchKey:t,matchObj:r,internal:s}){if(!t.endsWith("*")&&t in r){const a=r[t];return(0,resolvePackageTarget_js_1.resolvePackageTarget)(e,{target:a,subpath:"",internal:s})}const a=Object.keys(r).filter((e=>e.endsWith("/")||e.endsWith("*"))).sort(((e,t)=>t.length-e.length));for(const o of a){const a=o.substring(0,o.length-1);if(o.endsWith("*")&&t.startsWith(a)){const a=r[o],n=t.substring(o.length-1);return(0,resolvePackageTarget_js_1.resolvePackageTarget)(e,{target:a,subpath:n,pattern:!0,internal:s})}if(t.startsWith(o)){const a=r[o],n=t.substring(o.length);return(0,resolvePackageTarget_js_1.resolvePackageTarget)(e,{target:a,subpath:n,internal:s})}}throw new utils_js_1.InvalidModuleSpecifierError(e,s)}exports.resolvePackageImportsExports=resolvePackageImportsExports;