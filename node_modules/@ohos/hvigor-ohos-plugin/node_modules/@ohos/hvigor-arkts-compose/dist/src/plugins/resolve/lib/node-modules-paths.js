"use strict";var __importDefault=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.nodeModulesPaths=void 0;const path_1=__importDefault(require("path")),parse=path_1.default.parse||require("path-parse"),getNodeModulesDirs=function(e,t){let o="/";/^([A-Za-z]:)/.test(e)?o="":/^\\\\/.test(e)&&(o="\\\\");const r=[e];let s=parse(e);for(;s.dir!==r[r.length-1];)r.push(s.dir),s=parse(s.dir);return r.reduce(((e,r)=>e.concat(t.map((e=>path_1.default.resolve(o,r,e))))),[])};function nodeModulesPaths(e,t,o){const r=t&&t.moduleDirectory?[].concat(t.moduleDirectory):["oh_modules"];if(t&&"function"==typeof t.paths)return t.paths(o,e,(function(){return getNodeModulesDirs(e,r)}),t);const s=getNodeModulesDirs(e,r);return t&&t.paths?s.concat(t.paths):s}exports.nodeModulesPaths=nodeModulesPaths;