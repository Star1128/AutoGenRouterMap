"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.resolvePackageImports=void 0;const url_1=require("url"),resolvePackageImportsExports_js_1=require("./resolvePackageImportsExports.js"),utils_js_1=require("./utils.js");async function resolvePackageImports({importSpecifier:e,importer:r,moduleDirs:o,conditions:s,resolveId:t}){const i=await(0,utils_js_1.findPackageJson)(r,o);if(!i)throw new Error((0,utils_js_1.createBaseErrorMsg)(". Could not find a parent oh-package.json5."));const{pkgPath:a,pkgJsonPath:p,pkgJson:l}=i,n={importer:r,importSpecifier:e,moduleDirs:o,pkgURL:(0,url_1.pathToFileURL)(`${a}/`),pkgJsonPath:p,conditions:s,resolveId:t},{imports:c}=l;if(!c)throw new utils_js_1.InvalidModuleSpecifierError(n,!0);if("#"===e||e.startsWith("#/"))throw new utils_js_1.InvalidModuleSpecifierError(n,!0,"Invalid import specifier.");return(0,resolvePackageImportsExports_js_1.resolvePackageImportsExports)(n,{matchKey:e,matchObj:c,internal:!0})}exports.resolvePackageImports=resolvePackageImports;