"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.HosVersionMapper=void 0;const hos_component_constants_1=require("../const/hos-component-constants"),sdkmanager_common_1=require("@ohos/sdkmanager-common"),hos_sdk_version_dto_1=require("../dto/hos-sdk-version-dto");class HosVersionMapper{getBaseApi(o){const s=hos_component_constants_1.HOS_CONFIG.osVersionMapper[o];if((0,sdkmanager_common_1.isEmpty)(s))return[];return s.split(",").map((o=>Number(o))).filter((o=>!Number.isNaN(o)))}getSupportVersions(){const o=hos_component_constants_1.HOS_CONFIG.osVersionMapper,s=[];for(const e of Object.keys(o)){o[e].split(",").map((o=>Number(o))).filter((o=>!Number.isNaN(o))).map((o=>hos_sdk_version_dto_1.HosSdkVersionDto.create().platformVersion(e).baseApi(o))).forEach((o=>s.push(o)))}return s}isSupportVersion(o){const s=hos_component_constants_1.HOS_CONFIG.osVersionMapper[o];return(0,sdkmanager_common_1.isNotEmpty)(s)}getHosVersion(o){const s=hos_component_constants_1.HOS_CONFIG.osVersionMapper;for(const e of Object.keys(s)){if(s[e].split(",").map((o=>Number(o))).filter((o=>!Number.isNaN(o))).find((s=>s===o))===o)return e}return""}getHosSdkName(o){const s=hos_component_constants_1.HOS_CONFIG.osNameMapper[o];return null!=s?s:""}getHosSdkPath(o){const s=hos_component_constants_1.HOS_CONFIG.pathVersionMapper[o];return null!=s?s:""}transferVersionIntoHosVersion(o){const s=this.getBaseApi(o);if(s.length>0){const e=s.sort()[0];return hos_sdk_version_dto_1.HosSdkVersionDto.create().platformVersion(o).baseApi(e)}const e=Number(o),r=this.getHosVersion(e);if((0,sdkmanager_common_1.isNotEmpty)(r))return hos_sdk_version_dto_1.HosSdkVersionDto.create().platformVersion(r).baseApi(e)}getLatestSupportVersion(){return this.getSupportVersions().sort(((o,s)=>o.compareTo(s))).pop()}}exports.HosVersionMapper=HosVersionMapper,HosVersionMapper.INSTANCE=new HosVersionMapper;